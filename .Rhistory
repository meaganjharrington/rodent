df$cases <- as.integer(df$cases)
stopifnot(all(diff(df$time) == 1L))
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 40, 55),
inits = list(beta = 0.30, I0 = 10),
priors = list(mean_beta = log(0.30), sd_beta = 0.5,
rw_sd_beta = 0.2, mean_I0 = log(10), sd_I0 = 0.6),
mcmc  = list(n_steps = 6000, burnin = 0.5, seed = 42, n_rt_draws = 300)
)
View(out)
View(out)
devtools::load_all()
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
stopifnot(all(diff(df$time) == 1L))
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 40, 55),
inits = list(beta = 0.30, I0 = 10),
priors = list(mean_beta = log(0.30), sd_beta = 0.5,
rw_sd_beta = 0.2, mean_I0 = log(10), sd_I0 = 0.6),
mcmc  = list(n_steps = 6000, burnin = 0.5, seed = 42, n_rt_draws = 300)
)
View(out)
View(out)
library(EpiEstim)
df$I <- df$cases
res_parametric_si <- estimate_R(df$I,
method="parametric_si",
config = make_config(list(
mean_si = 2.6,
std_si = 1.5))
)
res_parametric_si
plot(res_parametric_si, legend = FALSE)
View(out)
View(out)
plot(out$Rt_series)
rmarkdown::render("README.Rmd")
# Use this (NOT the knit button!)
devtools::build_readme("README.Rmd")
# Use this (NOT the knit button!)
devtools::build_readme("epievolve")
load_all()
devtools::document()
devtools::document()
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e6,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
load_all()
document()
load_all()
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
head(out$Rt_series)
out$Rt_plot # print Rt(t) plot over time
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
head(out$Rt_series)
out$Rt_plot # print Rt(t) plot over time
load_all()
library(epievolve)
df <- read.csv("tests/testthat/incidence.csv", stringsAsFactors = FALSE)
names(df) <- tolower(names(df))
df$time  <- as.integer(df$time)
df$cases <- as.integer(df$cases)
out <- final_estimate_Rt_step(
incidence = df,
N = 1e4,
gamma = 1/6,
beta_breaks = c(1, 17, 35)
)
head(out$Rt_series)
out$Rt_plot # print Rt(t) plot over time
library(outbreaks)
data(package="outbreaks")
usethis::use_pkgdown()
pkgdown::build_site()
# Step 1: Install your package first
devtools::install()
# Step 2: Then build the site
pkgdown::build_site()
usethis::use_pkgdown_github_pages()
pkgdown::build_site()
# Clean previous build
pkgdown::clean_site()
# Rebuild
pkgdown::build_site()
# Step 1: Delete everything pkgdown-related
unlink("docs", recursive = TRUE)
unlink("_pkgdown.yml")
unlink(".github/workflows/pkgdown.yaml")
# Step 2: Remove from .Rbuildignore if needed
# (You can skip this, use_pkgdown will handle it)
# Step 3: Start fresh
usethis::use_pkgdown()
# Step 4: Edit _pkgdown.yml to add your URL
# Open the file and add this:
pkgdown::build_site()
# Build without installing (faster, avoids the warning)
pkgdown::build_site(install = FALSE)
unlink("docs", recursive = TRUE)
pkgdown::build_site()
usethis::use_pkgdown_github_pages()
#> ✔ Initializing empty, orphan 'gh-pages' branch in GitHub repo 'jane/mypackage'
#> ✔ GitHub Pages is publishing from:
#> • URL: 'https://jane.github.io/mypackage/'
#> • Branch: 'gh-pages'
#> • Path: '/'
#> ✔ Creating '.github/'
#> ✔ Adding '^\\.github$' to '.Rbuildignore'
#> ✔ Adding '*.html' to '.github/.gitignore'
#> ✔ Creating '.github/workflows/'
#> ✔ Saving 'r-lib/actions/examples/pkgdown.yaml@v2' to '.github/workflows/pkgdown.yaml'
#> • Learn more at <https://github.com/r-lib/actions/blob/v2/examples/README.md>.
#> ✔ Recording 'https://jane.github.io/mypackage/' as site's url in '_pkgdown.yml'
#> ✔ Adding 'https://jane.github.io/mypackage/' to URL field in DESCRIPTION
#> ✔ Setting 'https:/jane.github.io/mypackage/' as homepage of GitHub repo 'jane/mypackage'
unlink("docs", recursive = TRUE)
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(incidence = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
# Reorder columns
select(time, incidence)
load_all()
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 6700000,
gamma = 1/6
)
View(ebola_daily_incidence)
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(cases = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
# Reorder columns
select(time, incidence)
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(cases = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
# Reorder columns
select(time, cases)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 6700000,
gamma = 1/6
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000,
gamma = 1/6
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 6700000,
gamma = 1/6
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000
)
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000,
gamma = 1/6
)
stopifnot(is.numeric(ebola_daily_incidence))
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(cases = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
as.numeric(cases) %>%
# Reorder columns
select(time, cases)
ebola_daily_incidence <- ebola_daily_incidence %>%
as.numeric(cases)
View(ebola_daily_incidence)
ebola_daily_incidence <- ebola_daily_incidence %>%
as.numeric(cases)
ebola_daily_incidence$cases
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(cases = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
# Reorder columns
select(time, cases)
ebola_daily_incidence <- ebola_daily_incidence %>%
as.numeric(cases)
ebola_daily_incidence <- ebola_daily_incidence %>%
as.numeric(cases)
colnames(ebola_daily_incidence)
# Load necessary library
library(dplyr)
library(outbreaks)
data(ebola_sierraleone_2014)
# Count incidence by date_of_onset and create time variable
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
# Remove rows with missing date_of_onset
filter(!is.na(date_of_onset)) %>%
# Group by date_of_onset and count
group_by(date_of_onset) %>%
summarise(cases = n()) %>%
# Arrange by date to ensure proper ordering
arrange(date_of_onset) %>%
# Create time variable starting at 1
mutate(time = row_number()) %>%
# Reorder columns
select(time, cases)
ebola_daily_incidence <- as.numeric(ebola_daily_incidence$cases)
# Load necessary libraries
library(dplyr)
library(outbreaks)
# Data
data(ebola_sierraleone_2014)
# 1) Build a tidy daily incidence data frame (time, cases)
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
filter(!is.na(date_of_onset)) %>%
group_by(date_of_onset) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date_of_onset) %>%
mutate(time = row_number()) %>%
select(time, cases)
# 2) Create a numeric vector of cases for the Rt estimation
cases_vec <- as.numeric(ebola_daily_incidence$cases)
# 3) Quick sanity checks (recommended)
stopifnot(is.numeric(cases_vec))
stopifnot(all(is.finite(cases_vec)))
stopifnot(all(cases_vec >= 0))
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = cases_vec,
N = 670000,
gamma = 1/6
)
# 1) Build a tidy daily incidence data frame (time, cases)
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
filter(!is.na(date_of_onset)) %>%
group_by(date_of_onset) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date_of_onset) %>%
mutate(time = row_number()) %>%
select(time, cases)
View(ebola_daily_incidence)
class(ebola_daily_incidence)
class(ebola_daily_incidence$cases)
# Load necessary libraries
library(dplyr)
library(outbreaks)
# Data
data(ebola_sierraleone_2014)
# 1) Build a tidy daily incidence data frame (time, cases)
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
filter(!is.na(date_of_onset)) %>%
group_by(date_of_onset) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date_of_onset) %>%
mutate(time = row_number()) %>%
select(time, cases)
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = cases_vec,
N = 670000,
gamma = 1/6
)
# 1) Build a tidy daily incidence data frame (time, cases)
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
filter(!is.na(date_of_onset)) %>%
group_by(date_of_onset) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date_of_onset) %>%
mutate(time = row_number()) %>%
select(time, cases) %>%
as.data.frame()
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = cases_vec,
N = 670000,
gamma = 1/6
)
# Load necessary libraries
library(dplyr)
library(outbreaks)
# Data
data(ebola_sierraleone_2014)
# 1) Build a tidy daily incidence data frame (time, cases)
ebola_daily_incidence <- ebola_sierraleone_2014 %>%
filter(!is.na(date_of_onset)) %>%
group_by(date_of_onset) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date_of_onset) %>%
mutate(time = row_number()) %>%
select(time, cases) %>%
as.data.frame()
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000,
gamma = 1/6
)
table(ebola_daily_incidence$cases)
rlang::last_trace()
rlang::last_trace(drop = FALSE)
# Data
data("covid19_england_nhscalls_2020")
view(covid19_england_nhscalls_2020)
View(covid19_england_nhscalls_2020)
()
covid19_england_nhscalls_2020 <- covid19_england_nhscalls_2020 %>%
filter(!is.na(date)) %>%
group_by(date) %>%
summarise(cases = n(), .groups = "drop") %>%
arrange(date) %>%
mutate(time = row_number()) %>%
select(time, cases) %>%
as.data.frame()
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = covid19_england_nhscalls_2020,
N = 60000000,
gamma = 1/6
)
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = covid19_england_nhscalls_2020,
N = 6000000,
gamma = 1/6
)
head(out$Rt_series)
out$Rt_plot # print Rt(t) plot over time
# 4) Run your model using the numeric vector
out <- final_estimate_Rt_step(
incidence = ebola_daily_incidence,
N = 670000,
gamma = 0.1
)
head(out$Rt_series)
out$Rt_plot # print Rt(t) plot over time
